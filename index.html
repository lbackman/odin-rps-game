<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style src="script.js"></style>
    <title>Rock Paper Scissors</title>
</head>
<body>

<h1>Rock Paper Scissors</h1>
<!-- New html below this line -->

<div class="container">
    <div class="button-container">
        <div class="rock">
            <button id="Rock" class="rps">Rock</button>
        </div>
        <div class="paper">
            <button id="Paper" class="rps">Paper</button>
        </div>
        <div class="scissors">
            <button id="Scissors" class="rps">Scissors</button>
        </div>
    </div>
    <div class="result-container">
        <p id="result">
            The score after round <span id="current">0</span> is 
            <span id="player">0</span> - <span id="computer">0</span>.
        </p>
    </div>
</div>

<!-- New html above this line -->

<script>
    let playerScore = 0;
    let computerScore = 0;
    let i = 0;
    let round = document.querySelector('#current');
    let p1s = document.querySelector('#player'); //player score in dom
    let p2s = document.querySelector('#computer');

    const buttons = document.querySelectorAll('button.rps');
    buttons.forEach((button) => {
        button.addEventListener('click', function() {
            
            const choice = button.textContent;
            let result = playRound(choice);
            
            if (result === 'draw') {
                i++;
                round.textContent = i;

            } else if(result === 'lose') {
                i++;
                computerScore++;
                round.textContent = i;
                p2s.textContent = computerScore;

            } else {
                i++;
                playerScore++;
                round.textContent = i;
                p1s.textContent = playerScore;
            }
        }); 
    });
    
    function computerPlay() {
        const compChoice = Math.floor(Math.random()*3) + 1;

        if (compChoice === 1) {
            return "Rock";
        } else if (compChoice === 2) {
            return "Paper";
        } else {
            return "Scissors";
        }
    }

    function playRound(arg) {
        const comp = computerPlay();
        if (arg == comp) {
            console.log('draw');
            return 'draw';
        } else if ((arg == "Rock" && comp == "Paper") || 
                (arg == "Paper" && comp == "Scissors") || 
                (arg == "Scissors" && comp == "Rock")) {
            console.log('lose');
            return 'lose';
        } else {
            console.log('win');
            return 'win';
	    }
    }



    // Keeping function game() commented out if needed for reference.
    /*function game() {
        // Declare initial scores for both players
        let playerScore = 0;
        let computerScore = 0;
        let i = 0;
        // Use for loop to play best out of 5
        while (playerScore < 5 && computerScore < 5) {
            // Declare variables for selections and result inside the for loop

            
            const playerSelection = playerPlay();
            const computerSelection = computerPlay();
            const result = playRound(playerSelection, computerSelection);
            // Use if loop to tally the correct score
            //console.log(result);
            if (result === "draw") {
                console.log(`You both picked ${playerSelection.toLowerCase()}. That's a draw.`);
                i++;
            } else if ( result === "lose") {
                console.log(`You lose the round! ${computerSelection} beats ${playerSelection.toLowerCase()}.`);
                computerScore += 1;
                i++;
            } else if (result === null) {
                // Assign an "impossible" score in order to make it easier to cancel in the else if statement below
                playerScore = -1;
                computerScore = -1;
                break;
		// If the player enters "illegal value" decrement i so it doesn't count as a round
            } else if (result === "not defined") {
	 	        continue;
            } else {
                console.log(`You win the round! ${playerSelection} beats ${computerSelection.toLowerCase()}.`);
                playerScore += 1;
                i++;
	    }
           // only print result if the player enters approved value  
	   if (result !== "not defined") {
		console.log(`The score after round ${i} is ${playerScore} - ${computerScore}.`);
	   }
	    
        }
	// Declare the winner of the game
        if (playerScore > computerScore) {
            console.log("Congratulations! You won the game!")
        } else if (playerScore < computerScore) {
            console.log("You lost the game. Better luck next time!")
        } else if (playerScore === -1 && computerScore === -1) {
            console.log('You canceled the game. Type "game()" to start a new game.');
        } else {
            console.log("It's a tie!")
        }
    }*/
</script>

</body>
</html>
